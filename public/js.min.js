jQuery(function(t){function e(){}t("#external-events div.external-event").each(function(){var e={title:t.trim(t(this).text())};t(this).data("eventObject",e),t(this).draggable({zIndex:999,revert:!0,revertDuration:0})}),e.prototype.rand=Math.floor(26*Math.random())+Date.now(),e.prototype.getId=function(){return this.rand++};var a=new e,n=new Date,i=(n.getDate(),n.getMonth(),n.getFullYear(),t("#calendar").fullCalendar({buttonHtml:{prev:'<i class="ace-icon fa fa-chevron-left"></i>',next:'<i class="ace-icon fa fa-chevron-right"></i>'},header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},longPressDelay:1e3,nowIndicator:!0,now:n,editable:!0,droppable:!0,navLinks:!0,drop:function(e,n,i,s){var l=t(this).data("eventObject"),r=t(this).attr("data-class"),d=t.extend({},l);d.start=e,d.allDay=!0,null==d.end&&"agendaDay"==s.type&&(d.end=new Date(e._d.getTime()+72e5),d.allDay=!1),r&&(d.className=[r]),d.id=a.getId(),createEvent=!0;var o=e._d.getTime(),c=d.className[0],u="",p=t("#calendar").fullCalendar("clientEvents",function(t){u=!1;var a=t.start._d.getTime();if("agendaDay"==s.type)if(t.end){var n=t.end._d.getTime();if(o>=a&&n>o)u=!0;else if(d.end){var i=d.end.getTime();i>a&&i<=n&&(u=!0)}}else if(d.end){var i=d.end.getTime();i>a&&i<=n?u=!0:t.allDay&&a<o&&i<a+86399999&&(u=!0)}else o<=a&&n>a&&(u=!0);else if(t.end){var n=t.end._d.getTime();a<=o&&o<n?u=!0:d.allDay&&o<a&&n<o+86399999&&(u=!0)}else moment(t.start._d).isSame(e._d)&&(u=!0);return!(!u||t.className[0]!=c)||(createEvent=!0,!1)});if(p.length>=1&&(createEvent=!1),null!==d.title&&createEvent){var m={};m.id=d.id,m.state="write",m.title="ไม่ใส่รายละเอียด",m.userName=t("#username")[0].outerText,null!==d.start?null!==d.start._d&&(m.start=e._d):m.start=null,null!==d.end&&(m.end=d.end),null!==d.className&&(m.className=d.className[0]),d.allDay?m.allDay=!0:m.allDay=!1,null!==m&&t.ajax({url:"/proc",type:"POST",async:!1,contentType:"application/json",data:JSON.stringify(m)}),t.ajax({url:"/proc",type:"POST",async:!1,data:{state:"getevent",id:m.id,userName:m.userName},success:function(e){t("#calendar").fullCalendar("renderEvent",e[0])}})}},displayEventEnd:!0,timeFormat:"H:mm",selectable:!0,eventDrop:function(e){0==e.allDay&&null==e.end&&(e.end=new Date(e.start._d.getTime()),t("#calendar").fullCalendar("updateEvent",e)),createEvent=!0;var a=e.start._d.getTime(),n=e.className[0],i=t("#calendar").fullCalendar("clientEvents",function(t){newEvent=!1;var i=t.start._d.getTime();if(e.end){var s=e.end._d.getTime();if(t.allDay&&i<a&&s<i+86399999&&(newEvent=!0),t.end){var l=t.end._d.getTime();a>=i&&l>a?newEvent=!0:s>i&&s<=l?newEvent=!0:a<=i&&l>i&&(newEvent=!0)}else i>a&&s>i&&(newEvent=!0)}else if(t.end){var l=t.end._d.getTime();i<=a&&a<l?newEvent=!0:e.allDay&&a<=i&&l<a+86399999&&(newEvent=!0)}else moment(t.start._d).isSame(e.start._d)&&(newEvent=!0);return!(!newEvent||t.className[0]!=n)});if(i.length>1&&t("#calendar").fullCalendar("removeEvents",function(a){return a.id==e.id?(createEvent=!1,t.ajax({url:"/proc",type:"POST",async:!1,data:{state:"getevent",id:e.id,userName:t("#username")[0].outerText},success:function(e){t("#calendar").fullCalendar("renderEvent",e[0])}}),!0):void(createEvent=!0)}),null!==e.title&&createEvent){var s={};s.title=e.title,s.id=e.id,s.state="move",s.userName=t("#username")[0].outerText,null!==e.start?null!==e.start._d&&(s.start=e.start._d):s.start=null,null!==e.end?null!==e.end._d&&(s.end=e.end._d):s.end=null,e.allDay&&(s.allDay=!0),null!==e.className&&(s.className=e.className[0]),null!==s&&t.ajax({url:"/proc",type:"POST",contentType:"application/json",data:JSON.stringify(s)})}},eventResize:function(e){createEvent=!0;var a=e.start._d.getTime(),n=e.className[0],i="",s=t("#calendar").fullCalendar("clientEvents",function(t){var s=t.start._d.getTime();if(t.end){var l=t.end._d.getTime();if(e.end){var r=e.end._d.getTime();i=s>=a&&r>=l||(s<=a&&a<l||s<r&&r<=l)}else i=s<=a&&a<l}else if(e.end){var r=e.end._d.getTime();s>a&&r>s&&(i=!0)}else i=!!moment(t.start._d).isSame(e.start._d);return!(!i||t.className[0]!=n)});if(s.length>1&&t("#calendar").fullCalendar("removeEvents",function(a){if(a.id==e.id){createEvent=!1;return t.ajax({url:"/proc",type:"POST",async:!1,data:{state:"getevent",id:e.id,userName:t("#username")[0].outerText},success:function(e){t("#calendar").fullCalendar("renderEvent",e[0])}}),!0}createEvent=!0}),null!==e.title&&createEvent){var l={};l.title=e.title,l.id=e.id,l.state="resize",l.userName=t("#username")[0].outerText,null!==e.start?null!==e.start._d&&(l.start=e.start._d):l.start=null,null!==e.end?null!==e.end._d&&(l.end=e.end._d):l.end=null,e.allDay&&(l.allDay=!0),null!==e.className&&(l.className=e.className[0]),null!==l&&t.ajax({url:"/proc",type:"POST",contentType:"application/json",data:JSON.stringify(l)})}},eventMouseover:function(e){var a='<div class="tooltip">                <div class="tooltip-inner">จองโดย '+e.userName+"                </div>            </div>",n=t(a).appendTo("body");t(this).mouseover(function(e){t(this).css("z-index",1e4),n.fadeIn("500"),n.fadeTo("10",1.9)}).mousemove(function(t){n.css("top",t.pageY+10),n.css("left",t.pageX+20)})},eventMouseout:function(){t(this).css("z-index",8),t(".tooltip").remove()},viewRender:function(e,a){"month"!=e.type&&"agendaWeek"!=e.type||(t("#calendar").fullCalendar("removeEvents",function(t){return!t.isUserCreated}),start=e.start._i/1e3,end=e.end._i/1e3,t.ajax({url:"/proc",type:"POST",dataType:"json",async:!1,data:{userName:t("#username")[0].outerText,state:"load",start:start,end:end},success:function(e){t.each(e,function(e,a){t("#calendar").fullCalendar("renderEvent",a)})}}))},eventClick:function(e){if(t("#username")[0].outerText===e.userName){var a='<div class="modal fade">\t\t\t  <div class="modal-dialog">\t\t\t   <div class="modal-content">\t\t\t\t <div class="modal-body">\t\t\t\t   <button type="button" class="close" data-dismiss="modal" style="margin-top:-10px;">&times;</button>\t\t\t\t   <form class="no-margin">\t\t\t\t\t  <label>แก้หัวข้อ &nbsp;</label>\t\t\t\t\t  <input class="middle" autocomplete="off" type="text" value="'+e.title+'" />\t\t\t\t\t  <button type="submit" class="btn btn-sm btn-success"><i class="ace-icon fa fa-check"></i> Save</button>\t\t\t\t   </form>\t\t\t\t </div>\t\t\t\t <div class="modal-footer">                    <div class="btn btn-sm btn-info">จองโดย '+e.userName+'</div>\t\t\t\t\t<button type="button" class="btn btn-sm btn-danger" data-action="delete"><i class="ace-icon fa fa-trash-o"></i> Delete Event</button>\t\t\t\t\t<button type="button" class="btn btn-sm" data-dismiss="modal"><i class="ace-icon fa fa-times"></i> Cancel</button>\t\t\t\t </div>\t\t\t  </div>\t\t\t </div>\t\t\t</div>',a=t(a).appendTo("body");a.find("form").on("submit",function(n){if(n.preventDefault(),e.title=t(this).find("input[type=text]").val(),i.fullCalendar("updateEvent",e),null!==e.title){var s={};s.state="edit",s.id=e.id,s.title=e.title,s.userName=t("#username")[0].outerText,null!==e.start?null!==e.start._d&&(s.start=e.start._d):s.start=null,null!==e.end?null!==e.end._d&&(s.end=e.end._d):s.end=null,e.allDay&&(s.allDay=!0),null!==e.className&&(s.className=e.className),null!==s&&t.ajax({url:"/proc",type:"POST",contentType:"application/json",data:JSON.stringify(s)})}a.modal("hide")}),a.find("button[data-action=delete]").on("click",function(){if(i.fullCalendar("removeEvents",function(a){if(t("#username")[0].outerText)return a.id==e.id}),null!==e.title){var n={};n.state="remove",n.id=e.id,n.title=e.title,n.userName=t("#username")[0].outerText,null!==e.start?null!==e.start._d&&(n.start=e.start._d):n.start=null,null!==e.end?null!==e.end._d&&(n.end=e.end._d):n.end=null,e.allDay&&(n.allDay=!0),null!==e.className&&(n.className=e.className),null!==n&&t.ajax({url:"/proc",type:"POST",contentType:"application/json",data:JSON.stringify(n)})}a.modal("hide")}),a.modal("show").on("hidden",function(){a.remove()})}}}))}),+function(t){"use strict";function e(e){var a,n=e.attr("data-target")||(a=e.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function a(e){return this.each(function(){var a=t(this),i=a.data("bs.collapse"),s=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);!i&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),i||a.data("bs.collapse",i=new n(this,s)),"string"==typeof e&&i[e]()})}var n=function(e,a){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,a),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(a.call(i,"hide"),e||i.data("bs.collapse",null));var l=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[l](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[l](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var d=t.camelCase(["scroll",l].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[l](this.$element[0][d])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[a](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(n.TRANSITION_DURATION):i.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(a,n){var i=t(n);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var a=t.hasClass("in");t.attr("aria-expanded",a),e.toggleClass("collapsed",!a).attr("aria-expanded",a)};var i=t.fn.collapse;t.fn.collapse=a,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var i=t(this);i.attr("data-target")||n.preventDefault();var s=e(i),l=s.data("bs.collapse"),r=l?"toggle":i.data();a.call(s,r)})}(jQuery),function(t){var e;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var a=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=a,n}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}function e(a){function n(e,i,s){if("undefined"!=typeof document){if(arguments.length>1){s=t({path:"/"},n.defaults,s),"number"==typeof s.expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var l=JSON.stringify(i);/^[\{\[]/.test(l)&&(i=l)}catch(t){}i=a.write?a.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var d in s)s[d]&&(r+="; "+d,s[d]!==!0&&(r+="="+s[d].split(";")[0]));return document.cookie=e+"="+i+r}for(var o={},c=function(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},u=document.cookie?document.cookie.split("; "):[],p=0;p<u.length;p++){var m=u[p].split("="),f=m.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var v=c(m[0]);if(f=(a.read||a)(f,v)||c(f),this.json)try{f=JSON.parse(f)}catch(t){}if(o[v]=f,e===v)break}catch(t){}}return e?o[e]:o}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(t){return n.call({json:!0},t)},n.remove=function(e,a){n(e,"",t(a,{expires:-1}))},n.defaults={},n.withConverter=e,n}return e(function(){})}),jQuery(function(t){function e(){}t("#external-events div.external-event").each(function(){var e={title:t.trim(t(this).text())};t(this).data("eventObject",e),t(this).draggable({zIndex:999,revert:!0,revertDuration:0})}),e.prototype.rand=Math.floor(26*Math.random())+Date.now(),e.prototype.getId=function(){return this.rand++};var a=new e,n=new Date,i=(n.getDate(),n.getMonth(),n.getFullYear(),t("#calendar").fullCalendar({buttonHtml:{prev:'<i class="ace-icon fa fa-chevron-left"></i>',next:'<i class="ace-icon fa fa-chevron-right"></i>'},customButtons:{year:{text:"year",click:function(t){var e=new Date(1e3*t.view.start),a=e.getFullYear();i.fullCalendar("changeView","basic",{start:new Date(a,0,1,7),end:new Date(a,11,31,7)})}}},header:{left:"prev,next today",center:"title",right:"year,month,agendaWeek,agendaDay"},weekNumbers:!0,longPressDelay:1e3,nowIndicator:!0,now:n,editable:!0,droppable:!0,navLinks:!0,displayEventEnd:!0,timeFormat:"H:mm",selectable:!0,viewRender:function(e,a){"month"!=e.type&&"agendaWeek"!=e.type&&"basic"!=e.type||(t("#calendar").fullCalendar("removeEvents",function(t){return!t.isUserCreated}),start=e.start._i/1e3,end=e.end._i/1e3,t.ajax({url:"/proc",type:"POST",dataType:"json",async:!1,data:{userName:t("#username")[0].outerText,state:"loadl",start:start,end:end},success:function(e){t.each(e,function(e,a){t("#calendar").fullCalendar("renderEvent",a)})}}))},drop:function(e,n,i,s){var l=t(this).data("eventObject"),r=t(this).attr("data-class"),d=t.extend({},l);if(d.start=e,d.allDay=!0,null==d.end&&"agendaDay"==s.type&&(d.end=new Date(e._d.getTime()+72e5-252e5),d.allDay=!1),r&&(d.className=[r]),d.id=a.getId(),null!==d.title){var o={};o.id=d.id,o.editable="editable",o.title=d.title,o.userName=t("#username")[0].outerText,o.cTime=Date.now(),t.ajax({url:"/proc",type:"POST",dataType:"json",async:!1,data:{userName:o.userName,state:"loadm"},success:function(t){o.dataid=t.dataid,o.boss=t.boss,o.mailGroup=t.mailGroup}}),null!==d.start?null!==d.start._d&&(o.start=new Date(d.start._d.getTime()-252e5)):o.start=null,null!==d.end&&(o.end=d.end),null!==d.className&&(o.className=d.className[0]),d.allDay?o.allDay=!0:o.allDay=!1,null!==o&&t("#calendar").fullCalendar("renderEvent",o)}},eventMouseover:function(e,a){var n='<div class="tooltip">                <div class="tooltip-inner">ลาโดย '+e.userName+"                </div>            </div>",i=t(n).appendTo("body");t(this).mouseover(function(e){t(this).css("z-index",1e4),i.fadeIn("500"),i.fadeTo("10",1.9)}).mousemove(function(t){i.css("top",t.pageY+10),i.css("left",t.pageX+20)})},eventMouseout:function(){t(this).css("z-index",8),t(".tooltip").remove()},eventClick:function(e){if(t("#username")[0].outerText===e.userName&&e.editable){if("label-grey"==e.className?larType="ลาป่วย":"label-success"==e.className?larType="ลากิจ":"label-warning"==e.className?larType="ลาพักร้อน":larType="ลาอื่นๆ","ลาอื่นๆ"==larType)var a='<div class="modal fade">                <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                    <h5 class="modal-title">'+larType+'</h5>                    </div>                    <div class="modal-body">                    <button type="button" class="close" data-dismiss="modal" style="margin-top:-10px;">&times;</button>                    <form class="no-margin">                        <label>แก้หัวข้อ &nbsp;</label>                        <div class="row">                            <div class="col-md-6">                            <select class="form-control" id="larType">                                <option>ลาฝึกอบรม</option>                                <option>ลาทำหมัน</option>                                <option>ลาคลอด</option>                                <option>ลาอุปสมบท</option>                                <option>ลารับราชการทหาร</option>                            </select>                            </div>                            <div class="col-md-6"><button type="submit" class="btn btn-sm btn-success"><i class="ace-icon fa fa-check"></i> Save</button></div>                            </div>                        </span>                    </form>                    </div>                    <div class="modal-footer">                        <div class="btn btn-sm btn-info">เมื่อบันทึกแล้วจะไม่สามารถแก้ไขได้</div>                        <button type="button" class="btn btn-sm btn-danger" data-action="delete"><i class="ace-icon fa fa-trash-o"></i> Delete Event</button>                        <button type="button" class="btn btn-sm" data-dismiss="modal"><i class="ace-icon fa fa-times"></i> Cancel</button>                    </div>                </div>                </div>                </div>';else var a='<div class="modal fade">                <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                    <h5 class="modal-title">'+larType+'</h5>                    </div>                    <div class="modal-body">                    <button type="button" class="close" data-dismiss="modal" style="margin-top:-10px;">&times;</button>                    <form class="no-margin">                        <label>แก้หัวข้อ &nbsp;</label>                        <input class="middle" autocomplete="off" type="text" id="larType" value="'+e.title+'" />                        <button type="submit" class="btn btn-sm btn-success"><i class="ace-icon fa fa-check"></i> Save</button>                    </form>                    </div>                    <div class="modal-footer">                        <div class="btn btn-sm btn-info">เมื่อบันทึกแล้วจะไม่สามารถแก้ไขได้</div>                        <button type="button" class="btn btn-sm btn-danger" data-action="delete"><i class="ace-icon fa fa-trash-o"></i> Delete Event</button>                        <button type="button" class="btn btn-sm" data-dismiss="modal"><i class="ace-icon fa fa-times"></i> Cancel</button>                    </div>                </div>                </div>                </div>';var a=t(a).appendTo("body");a.find("form").on("submit",function(n){if(n.preventDefault(),e.title=t(this).find("#larType").val(),e.editable=!1,i.fullCalendar("updateEvent",e),null!==e.title){var s={};s.dataid=e.dataid,s.state="savelar",s.id=e.id,s.title=e.title,s.userName=t("#username")[0].outerText,s.cTime=e.cTime,null!==e.start?null!==e.start._d&&(s.start=e.start._d):s.start=null,null!==e.end?null!==e.end._d&&(s.end=e.end._d):s.end=null,e.allDay&&(s.allDay=!0),null!==e.className&&(s.className=e.className),s.boss=e.boss,s.mailGroup=e.mailGroup,null!==s&&t.ajax({url:"/proc",type:"POST",contentType:"application/json",data:JSON.stringify(s)})}a.modal("hide")}),a.find("button[data-action=delete]").on("click",function(){i.fullCalendar("removeEvents",function(a){if(t("#username")[0].outerText)return a.id==e.id}),a.modal("hide")}),a.modal("show").on("hidden",function(){a.remove()})}}}))}),jQuery(function(t){t(".toggle-password").mousedown(function(){t(this).toggleClass("fa-eye fa-eye-slash");var e=t(t(this).attr("toggle"));e.attr("type","text")}),t(".toggle-password").mouseup(function(){t(this).toggleClass("fa-eye fa-eye-slash");var e=t(t(this).attr("toggle"));e.attr("type","password")})}),jQuery(function(t){t("#datetimepicker").datetimepicker({ignoreReadonly:!0,format:"DD/MM/YYYY"}),t("#timepicker1").datetimepicker({ignoreReadonly:!0,format:"HH:mm"}),t("#timepicker2").datetimepicker({ignoreReadonly:!0,format:"HH:mm"}),t("#datetimepicker").on("dp.change",function(e){t.ajax({url:"/setting",type:"POST",async:!1,data:{state:"cdate",emid:t("table").find("#privacyID").text(),cdate:e.date._d.getTime()/1e3}})}),t("#timepicker1").on("dp.change",function(e){t.ajax({url:"/setting",type:"POST",async:!1,data:{state:"swtime",emid:t("table").find("#privacyID").text(),swtime:moment(e.date._d.getTime()).format("HH:mm:00")}})}),t("#timepicker2").on("dp.change",function(e){t.ajax({url:"/setting",type:"POST",async:!1,data:{state:"ewtime",emid:t("table").find("#privacyID").text(),ewtime:moment(e.date._d.getTime()).format("HH:mm:00")}})})}),$(document).ready(function(){$(document).on("click",".addline",function(){function t(){}t.prototype.rand=Math.floor(26*Math.random())+Date.now(),t.prototype.getId=function(){return this.rand++};var e=new t,a=!1,n=$(this).parents("tr").find("input.add");if(n.each(function(){$(this).val()?$(this).removeClass("error"):($(this).addClass("error"),a=!0)}),$(this).parents("tr").find(".error").first().focus(),!a){var i,s,l,r,d,o,c,u,p=e.getId();n.each(function(){$(this).parent("td").html("<p>"+$(this).val()+"</p"),"emid"===$(this).attr("id")&&(i=$(this).val()),"name"===$(this).attr("id")&&(s=$(this).val()),"lastName"===$(this).attr("id")&&(l=$(this).val()),"jobPos"===$(this).attr("id")&&(r=$(this).val()),"depart"===$(this).attr("id")&&(d=$(this).val()),"mail"===$(this).attr("id")&&(o=$(this).val()),"mailGroup"===$(this).attr("id")&&(c=$(this).val()),"userName"===$(this).attr("id")&&(u=$(this).val())}),$.ajax({url:"/setting",type:"POST",dataType:"json",async:!1,data:{state:"add",dataid:p,cdate:(new Date).getTime()/1e3,emid:i,name:s,lastName:l,mail:o,jobPos:r,depart:d,mailGroup:c,userName:u,password:u+"1234"},success:function(t){var e='<td class="center">                    <a class="saveline fa fa-floppy-o hvr-pulse" title="Save"></a>                    <a class="editline fa fa-pencil-square-o hvr-pulse" title="Edit"></a>                    <a class="privacy fa fa-address-card-o hvr-pulse" title="Privacy Setting"></a>                    <a class="delete fa fa-trash hvr-pulse title="Delete" data-toggle="confirmation" data-placement="left"></a></td>';$("tbody[id=manage]").find("tr:last-child").addClass(t.dataid),$("."+t.dataid).find("td:last-child").remove(),$("."+t.dataid).append(e);var a='<tr>                    <td class="center"><input class="add" id="emid"></td>                    <td class="center"><input class="add" id="name"></td>                    <td class="center"><input class="add" id="lastName"></td>                    <td class="center"><input class="add" id="jobPos"></td>                    <td class="center"><input class="add" id="depart"></td>                    <td class="center"><input class="add" id="mail"></td>                    <td class="center"><input class="add" id="mailGroup"></td>                    <td class="center"><input class="add" id="userName"></td>                    <td class="center"><a class="addline fa fa-plus hvr-pulse" title="Add" data-toggle="tooltip"></a></td>                    </tr>';$("table[id=manage]").append(a)}})}}),$(document).on("click",".delete",function(){dataid=$(this).parents("tr").attr("class"),$("."+dataid+" .delete").confirmation("show"),$(document).on("confirmed.bs.confirmation",".delete",function(){dataid=$(this).parents("tr").attr("class"),$.ajax({url:"/setting",type:"POST",dataType:"json",async:!1,data:{state:"delete",dataid:dataid},success:function(t){$("tr[class="+t.dataid+"]").remove()}})})}),$(".rb-txt").click(function(){$(this).addClass("rotate"),$(this).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(t){"rb-txt rotate"==t.target.className&&$(this).removeClass("rotate")});var t,e,a=$(this).attr("id"),n="rb",i=$("table").find("#privacyName").text();"super-happy"==a?(t=[1,1,0,0,0,0,0,0,0,0],e=0):"happy"==a?(t=[1,1,1,0,0,0,0,1,0,0],e=1):"neutral"==a?(t=[1,1,0,1,0,0,0,1,0,0],e=2):"sad"==a?(t=[1,1,0,1,1,0,1,1,0,0],e=3):(t=[1,1,1,1,1,1,1,1,1,1],e=4),$("input:radio[name=access]").each(function(){a==$(this).attr("class")?$(this).attr("checked",!0):$(this).attr("checked",!1)}),$("input:checkbox[class=privacy]").each(function(){t[$(this).attr("id")]?$(this).attr("checked",!0):$(this).attr("checked",!1)}),$.ajax({url:"/privacy",type:"POST",dataType:"text",data:{state:n,sel:e,dataname:i}})}),$(document).on("click",".privacy",function(){var t=$(this).parents("tr").attr("class");$.ajax({url:"/setting",type:"POST",dataType:"json",async:!1,data:{state:"privacy",dataid:t},success:function(t){var e=t.operator,a=["super-happy","happy","neutral","sad","super-sad"],n=a[e];0==e?chk=[1,1,0,0,0,0,0,0,0,0]:1==e?chk=[1,1,1,0,0,0,0,0,0,0]:2==e?chk=[1,1,0,1,0,0,0,0,0,0]:3==e?chk=[1,1,0,1,1,0,1,0,0,0]:chk=[1,1,1,1,1,1,1,1,1,1],$("#datetimepicker").data("DateTimePicker").date(t.cdate),$("#timepicker1").data("DateTimePicker").date(t.swtime),$("#timepicker2").data("DateTimePicker").date(t.ewtime),$("#privacyID").text(t.emid),$("#privacyName").text(t.userName),$("#privacyMailGroup").text(t.mailGroup),$(".tgl.tgl-flip").attr("checked",t.boss),$("input:radio[name=access]").each(function(){n==$(this).attr("class")?$(this).attr("checked",!0):$(this).attr("checked",!1)}),$("input:checkbox[class=privacy]").each(function(){chk[$(this).attr("id")]?$(this).attr("checked",!0):$(this).attr("checked",!1)}),$("#animatedModal").animatedModal({modalTarget:"animatedModal",animatedIn:"bounceInUp",animatedOut:"bounceOutDown",color:"#FFFFFF",animationDuration:".5s",beforeOpen:function(){function t(){a!=e.length&&(e.eq(a++).show().velocity("transition.slideUpIn",{opacity:1,stagger:450,defaultDuration:100}),window.setTimeout(t,100))}var e=$(".thumb"),a=0;t()},afterClose:function(){$(".thumb").hide()}})}})}),$(document).on("click",".editline",function(){var t=["emid","name","lastName","jobPos","depart","mail","mailGroup","userName","password"],e=0;$(this).parents("tr").find("td:not(:last-child)").each(function(){$(this).html('<input class="save center" id="'+t[e++]+'" value="'+$(this).text()+'">')}),$(this).parents("tr").find(".saveline").css("display","inline-block"),$(this).parents("tr").find(".editline").css("display","none")}),$(document).on("click",".saveline",function(){$(this).parents("tr").find(".editline").css("display","inline-block"),$(this).parents("tr").find(".saveline").css("display","none");var t=!1,e=$(this).parents("tr").find("input.save"),a=$(this).parents("tr").attr("class");if(e.each(function(){$(this).val()?$(this).removeClass("error"):($(this).addClass("error"),t=!0)}),$(this).parents("tr").find(".error").first().focus(),!t){var n,i,s,l,r,d,o,c;e.each(function(){$(this).parent("td").html($(this).val()),"emid"===$(this).attr("id")&&(n=$(this).val()),"name"===$(this).attr("id")&&(i=$(this).val()),"lastName"===$(this).attr("id")&&(s=$(this).val()),"jobPos"===$(this).attr("id")&&(l=$(this).val()),"depart"===$(this).attr("id")&&(r=$(this).val()),"mail"===$(this).attr("id")&&(d=$(this).val()),"mailGroup"===$(this).attr("id")&&(o=$(this).val()),"userName"===$(this).attr("id")&&(c=$(this).val())}),$.ajax({url:"/setting",type:"POST",dataType:"json",async:!1,data:{state:"save",dataid:a,emid:n,name:i,lastName:s,mail:d,jobPos:l,depart:r,mailGroup:o,userName:c}})}})}),jQuery(function(t){t(function(){function e(){var e=t("#datetimepickera").data("DateTimePicker").date()._d,n=t("#datetimepickerb").data("DateTimePicker").date()._d,i=t(".fa-search").text();t.ajax({url:"/search",type:"POST",dataType:"json",async:!1,data:{datea:e.valueOf(),dateb:n.valueOf(),searchName:i},success:function(e){""==e.objs?t(".col-sm-2 h4").text("ไม่พบข้อมูล"):(t(".col-sm-2 h4").text(""),t("table tbody tr").remove(),t("table").append(a(e)))}})}function a(t){for(var e,a=0,n="";a<t.tbl;)e=0==t.objs[a].approve?"":1==t.objs[a].approve?'class="bg-danger"':'class="bg-success"',n+="<tr "+e+">                <td>"+t.objs[a].cTime+"</td>                <td>"+t.objs[a].lartype+"</td>                <td>"+t.objs[a].title+"</td>                <td>"+t.objs[a].dateStart+"</td>                <td>"+t.objs[a].dateEnd+"</td>                <td>"+t.objs[a].timeStart+"-"+t.objs[a].timeEnd+"</td>                <td>"+t.objs[a].daylength+"</td>                <td>"+t.objs[a].larstatus+"</td>                <td>"+t.objs[a].approver+"</td>                <tr>",a++;return n+="<tr>            <td>รวม "+t.tbl+" รายการ</td>            <td></td>            <td></td>            <td></td>            <td></td>            <td></td>            <td>"+t.lengthPlus+"</td>            <td></td>            <td></td>            <tr>"}t("#datetimepickera").datetimepicker({ignoreReadonly:!0,format:"dddd DD/MM/Y",defaultDate:moment().add(-1,"days")}),t("#datetimepickerb").datetimepicker({ignoreReadonly:!0,format:"dddd DD/MM/Y",defaultDate:new Date}),t("#datetimepickera").on("dp.change",function(e){t("#datetimepickerb").data("DateTimePicker").minDate(e.date)}),t("#datetimepickerb").on("dp.change",function(e){t("#datetimepickera").data("DateTimePicker").maxDate(e.date)}),t(".dropdown-item").click(function(){t(".fa-search").text(t(this).text())}),t("#searchdata").click(function(){" Search"===t(".fa-search").text()?t(".col-sm-2 h4").text("กรุณาเลือกชื่อเพื่อค้นหา"):e()})})}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var a in e)if(void 0!==t.style[a])return{end:e[a]};return!1}t.fn.emulateTransitionEnd=function(e){var a=!1,n=this;t(this).one("bsTransitionEnd",function(){a=!0});var i=function(){a||t(n).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery);